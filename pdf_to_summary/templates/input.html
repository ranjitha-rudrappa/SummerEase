{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pdf Summarizer</title>
    <!-- Add Font Awesome link (make sure to include this in your project) -->
    <link rel="stylesheet" href="{% static 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css' %}">
    <link rel="stylesheet" href="{% static 'pdf1.css' %}">
    <style>
        body {
            margin: 0;
            /* font-family: Arial, sans-serif; */
            font-family: 'Mukta', sans-serif;
            display: flex;
            flex-direction: column;
            background-color: rgba(223, 223, 223, 0.421);

        }

        .navbar-vertical {
            height: 100vh;
            width: 70px;
            background-color: white;
            position: fixed;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            transition: width 0.3s ease-in;
            z-index: 1;
        }

        .navbar-vertical:hover {
            width: 200px;
        }

        .navbar-vertical a {
            padding: 15px;
            text-decoration: none;
            color: black;
            text-align: center;
            width: 100%;
            box-sizing: border-box;
            transition: background-color 0.3s ease-in;
            display: flex;
            flex-direction: row;
            /* margin: 40px; */
            align-items: center;
        }

        .navbar-vertical a span {
            display: none;
        }

        .navbar-vertical:hover a span {
            display: block;
        }

        .navbar-vertical img {
            width: 50px;
            margin-bottom: 5px;
        }

        .navbar-horizontal {
            background-color: green;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            box-sizing: border-box;
            z-index: 2;
            height: 60px;
            position: fixed;
        }


        .navbar-horizontal p {
            width: 40px;
            color: white;
        }

        .navbar-horizontal span {
            color: white;
            font-weight: bold;
            text-align: center;
            flex-grow: 1;
        }

        .sidebar header {
            text-align: center;
            background-color: #f2f2f2;
            padding: 10px;
            height: 10vh;
            color: #0a4b50;
            box-shadow: 0px 1px 10px rgba(41, 39, 39, 0.629);

        }

        .sidebar ul a {
            /* text-align: center; */
            /* display: block; */
            display: block;
            height: 100%;
            width: 100%;
            line-height: 85px;
            font-size: 16px;
            color: rgb(2, 60, 68);
            box-sizing: border-box;
            transition: .6s;
            padding: 1%;
            /* padding: 6%; */

            /* border-top: 1px solid #064a698c;
            border-bottom: 1px solid rgba(8, 63, 87, 0.612); */
        }

        .sidebar ul li {
            /* display: none; */
            padding-left: 50px;
            box-shadow: 0px 0px 9px rgba(0, 0, 0, 0.262);
            margin-left: -22%;
        }

        .sidebar li a {
            width: 120%;
            margin-left: -38px;
        }

        ul li:hover a {
            padding-left: 9px;
        }

        .translate-container {
            position: relative;
            display: inline-block;
        }

        .translate-button {
            padding: 10px;
            cursor: pointer;
        }

        .language-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background-color: #f9f9f9;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 4px;
            z-index: 1;
        }

        .language-item {
            padding: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .language-item:hover {
            background-color: #e5e5e5;
        }
    </style>
</head>
<body style="background-color:#f0f5f5;">
<!--    <div id="leftPane" class="sidebar" onclick="toggleLeftPane()" style="background-color: rgb(255, 255, 255);">-->

<!--        <header><h3>SummarEase</h3></header>-->
<!--        <ul>-->
<!--            <li ><a href="{% url 'index' %}"><i class="fas fa-file-alt icon"style="color: rgb(0, 138, 119);"></i> Text Summarizer</a></li>-->

<!--            <li><a href="{% url 'summarize' %}"><i class="fas fa-file-pdf icon"style="color: blue;"></i> PdfSummarizer</a></li>-->

<!--             <li><a href="{% url 'grammar_checker' %}"><i class="fas fa-code icon"style="color:green"></i> GrammarChecker</a></li>-->
<!--            <li><a href="{% url 'history' %}" ><i class="fas fa-user icon" ></i> History</a></li>-->
<!--            <li><a href="{% url 'home' %}" ><i class="fas fa-sign-out-alt icon" style="color:red"></i> Logout</a></li>-->

<!--        </ul>-->
<!--    </div>-->
<div class="navbar-horizontal" style="background-color:white;">
       <p style="color:green;font-size:20px; font-family:cursive; "><b>SummarEase</b></p>
        <span id="selected-option" style="float:ltr; color:green; font-size:20px; font-family:timesroman" class="animated-text">Effortlessly distill lengthy PDFs into concise insights..!!</span>

    </div>
<p>Effortlessly distill lengthy PDFs into concise insights..!!</p>
    <div class="navbar-vertical">
        <a href="{% url 'index' %}"><img src="{% static 'images/summary.png' %}" alt="Home"
                title="Home"><span>&nbsp;&nbsp;&nbsp;Summary</span></a>

        <a href="{% url 'summarize' %}"><img src="{% static 'images/pdf.png' %}" alt="About"
                title="About"><span>&nbsp;&nbsp;&nbsp;Pdf</span></a>
        <a href="{% url 'grammar_checker' %}"><img src="{% static 'images/grammar.png' %}" alt="Services"
                title="Services"><span>&nbsp;&nbsp;&nbsp;Grammar</span></a>
        <a href="{% url 'history' %}"><img src="{% static 'images/history.png' %}" alt="Contact"
                title="Contact"><span>&nbsp;&nbsp;&nbsp;History</span></a>
        <a href="{% url 'home' %}"><img src="{% static 'images/logout.png' %}" alt="Contact"
                title="Contact"><span>&nbsp;&nbsp;&nbsp;Logout</span></a>
    </div>
    </div>

    <div id="mainContent" style="background-color:white; margin-top:6%">
        <div class="top" style="background-color:green;">
            <div class="linesContainer">

                <div id="control-panel">
                    <!-- Label for minimum value -->
                <!-- <p>id="minLabel"><b>PDF Summarizer</b></p> -->
                    <h3 style="color: white; font-size:22px; margin-left:40% "> <b>Pdf Summarizer</b></h3>

                    <div id="but" >

                        <a href='{% url "texttospeech1" %}'><i class="fas fa-microphone larger-icon" id="microphonebutton" style="border: 1px solid green; background-color: green; color: white;"></i></a>
                          <a href="#" id="translatebutton" style="border: 1px solid green; background-color: green; color: white;" onclick="toggleLanguageMenu()">
    <i class="fas fa-language larger-icon"></i>
</a>
<div id="language-menu" style="display: none;">
    <form id="language-form" action="{% url 'translate_summary1' %}" method="get">
        <select id="target-language" name="target_language">
            <option value="en">English</option>
            <option value="hi">Hindi</option>
            <option value="kn">Kannada</option>
            <option value="te">Telugu</option>
            <option value="fr">French</option>
            <option value="de">German</option>
            <!-- Add more language options as needed -->
        </select>
        <input type="submit" value="Translate">
    </form>
</div>
<!--                        <div class="translate-container">-->
<!--                            <form id="language-form" action="{% url 'translate_summary1' %}" method="get">-->
<!--<div class="translate-button" id="target-language" name="target_language" onmouseover="showLanguages()" onmouseout="hideLanguages()">-->
<!--    -->
<!--</div>-->
<!--<div class="language-dropdown" onmouseover="showLanguages()" onmouseout="hideLanguages()">-->
<!--<div class="language-item" type="submit" onclick="changeLanguage('en')">English</div>-->
<!--<div class="language-item" type="submit" onclick="changeLanguage('es')">Spanish</div>-->
<!--<div class="language-item" type="submit" onclick="changeLanguage('fr')">French</div>-->
<!--&lt;!&ndash; Add more languages as needed &ndash;&gt;-->
<!--</div>-->
<!--                            </form>-->
<!--</div>-->
<script>
    function toggleLanguageMenu() {
        var languageMenu = document.getElementById('language-menu');
        languageMenu.style.display = (languageMenu.style.display === 'none' || languageMenu.style.display === '') ? 'block' : 'none';
    }
</script>

                        <button id="deletebutton" title="Delete" onclick="deleteOutput()" style="margin-left:10%; border: 1px solid green; background-color: green; color:white"><i class="fas fa-trash-alt larger-icon"></i></button>
                        </div>
                </div>

            </div>
            </div>

            <div class="main">
            <div class="left" style ="border-radius: 10px; box-shadow:none; margin-bottom:8%">


            <form id="pdfForm" action="{% url 'summarize' %}" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <label><b>Page to Summarize:</b> <input type="number" name="maxL" min="1" placeholder="Enter page number"></label>


    <div id="upload-container">
        <label id="custom-upload" for="file-input">
            <i class="fas fa-cloud-upload-alt fa-2x" style="margin-left:-10px; color:green;"></i>
        </label>
        <!-- Actual file input (hidden) -->
        <p style="color: black; padding-right:65%; "><b>Upload PDF</b></p>
        <input type="file" id="file-input" name="file-input" accept=".pdf" onchange="displayFileName()" />
        <p id="pdf-name" style="color: rgb(6, 84, 84); margin-left:-60%; display: none; "><b>{{ input }}</b></p>
    </div>

    <button id="extract-button" type="submit" style="color:white; background-color:green">Extract Content</button>
</form>

            </div>

        <!-- <hr style="height: 90%; border: 0; border-left: 1px solid #ed0909; margin: 0 10px;"> -->
        <div class="right" id="rightpane" style="margin-bottom:15%;">
            {% if result %}

            <h3>Summary:</h3>
             <p id="output">{{ result }}</p>

             {% endif %}
        </div>


        </div>
    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/js/all.min.js"></script>
    <script>

    function showLanguages() {
    document.querySelector('.language-dropdown').style.display = 'block';
  }

  function hideLanguages() {
    document.querySelector('.language-dropdown').style.display = 'none';
  }

  function changeLanguage(lang) {
    // Implement your translation logic here
    console.log('Selected language:', lang);
    // You can replace the console.log with actual translation code
  }
        function submitForm() {
            var form = document.getElementById('pdfForm');
            var formData = new FormData(form);

            fetch(form.action, {
                method: 'POST',
                body: formData,
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}',
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    console.error('Error:', data.error);
                } else {
                    // Update the content dynamically in the right pane
                    var rightPane = document.getElementById('rightPane');
                    rightPane.innerHTML = data.html_content;

                    // Show the delete button when there's content in the output
                    var deleteButton = document.getElementById('deletebutton');
                    deleteButton.style.display = rightPane.innerText.trim() !== '' ? 'inline-block' : 'none';
                }
            })
            .catch(error => console.error('Error:', error));
        }
            function displayFileName() {
                var input = document.getElementById('file-input');
                var fileName = input.files[0].name;
                var pdfNameElement = document.getElementById('pdf-name');

                // Display PDF name
                pdfNameElement.innerHTML = 'Selected PDF: ' + fileName;

            }

        function resizeTextbox(){
            const textarea = document.getElementById('userInput');
            text.style.height = 'auto';
            text.style.height=(textarea.scrollHeight + 2)+'px';

        }

              function processText() {
                var inputText = document.getElementById('inputText').value;
                var processedText = '' + inputText.toUpperCase();
                var outputDiv = document.getElementById('output');
                outputDiv.innerText = processedText;

                // Show the delete button when there's content in the output
                var deleteButton = document.getElementById('deletebutton');
                deleteButton.style.display = outputDiv.innerText.trim() !== '' ? 'inline-block' : 'none';
              }

              function deleteOutput() {
                var outputDiv = document.getElementById('output');
                outputDiv.innerText = '';

                // Hide the delete button after deleting the content
                var deleteButton = document.getElementById('deletebutton');
                deleteButton.style.display = 'none';
              }

              <!-- Add this script to your HTML file -->



                  // Function to display PDF name
                  function displayFileName() {
                      var input = document.getElementById('file-input');
                      var fileName = input.files[0].name;
                      var pdfNameElement = document.getElementById('pdf-name');

                      // Display PDF name
                      pdfNameElement.innerHTML = 'Selected PDF: ' + fileName;
                      pdfNameElement.style.display = 'block';
                  }

    </script>
</body>
</html>

